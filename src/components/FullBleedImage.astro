---
export interface Props {
  src: string | { src: string };
  alt?: string;
}
const { src, alt = '' } = Astro.props;
---
<img 
  src={typeof src === 'string' ? src : src.src} 
  alt={alt} 
  class="full-bleed-image" 
  loading="eager"
  decoding="sync"
/>
<style>
.full-bleed-image {
  display: block;
  width: 100vw;
  max-width: 100vw; /* Prevent horizontal overflow on Mobile Safari */
  height: 100vh; /* Set explicit height to prevent layout shift */
  margin: 0 calc(50% - 50vw);
  object-fit: cover;
  object-position: center;
  grid-column: 1 / -1;
  /* Ensure no horizontal overflow */
  overflow-x: hidden;
  box-sizing: border-box;
}

/* Mobile Safari specific fixes */
@media screen and (max-width: 768px) {
  .full-bleed-image {
    /* More conservative approach for mobile */
    width: 100%;
    max-width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
  }
}

/* WebKit/Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  .full-bleed-image {
    /* Ensure proper viewport handling in WebKit browsers */
    width: 100%;
    max-width: 100vw;
  }
}
</style> 